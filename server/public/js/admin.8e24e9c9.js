(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{1101:function(t,e,n){"use strict";var i=n("25b6"),a=n.n(i);a.a},"25b6":function(t,e,n){},"30c7":function(t,e,n){"use strict";var i=n("cdea"),a=n.n(i);a.a},"3a3a":function(t,e,n){"use strict";var i=n("970d"),a=n.n(i);a.a},"43c9":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Tags",{on:{change:t.filter}}),n("div",[n("button",{on:{click:function(e){t.isModalOpen=!0}}},[t._v("+ Add new item")])]),t.loading?n("Loader"):t._l(t.items,(function(t){return n("PartAdminItem",{key:t.id,attrs:{item:t}})})),n("Modal",{attrs:{"is-open":t.isModalOpen},on:{close:function(e){t.isModalOpen=!1}}},[n("AdminItemForm",{attrs:{create:!0},on:{cancel:function(e){t.isModalOpen=!1}}})],1)],2)},a=[],s=n("3855"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.insert?n("div",[n("button",{on:{click:function(e){t.isModalOpen=!0}}},[t._v("+ Add new item")])]):n("div",{staticClass:"line",on:{click:function(e){t.isModalOpen=!0}}},[n("div",[t.item.title?n("strong",{domProps:{innerHTML:t._s(t.item.title)}}):t._e(),t.item.types&&t.item.types.length?t._l(t.item.types,(function(e){return n("small",{key:e,domProps:{innerHTML:t._s(e)}})})):t._e()],2),n("div",[t.item.tags&&t.item.tags.length?t._l(t.item.tags,(function(e){return n("small",{key:e,staticClass:"tag",domProps:{innerHTML:t._s(e)}})})):t._e(),t.item.date?n("span",{staticClass:"date",domProps:{innerHTML:t._s(new Date(t.item.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))}}):t._e()],2)]),n("Modal",{attrs:{"is-open":t.isModalOpen},on:{close:function(e){t.isModalOpen=!1}}},[n("AdminItemForm",{attrs:{item:t.item,create:t.insert},on:{cancel:function(e){t.isModalOpen=!1}}})],1)],1)},r=[],l=n("fbeb"),c=n("714b"),u={components:{AdminItemForm:l["default"],Modal:c["a"]},props:{item:{type:Object},insert:{type:Boolean,default:!1}},data:function(){return{isModalOpen:!1}},methods:{}},d=u,p=(n("cda2"),n("2877")),m=Object(p["a"])(d,o,r,!1,null,"81f9a610",null),f=m.exports,h=n("34e7"),v=n("555f"),g={components:{PartAdminItem:f,AdminItemForm:l["default"],Modal:c["a"],Tags:s["a"],Loader:v["a"]},props:{filterTypes:{type:Array,default:function(){return[]}},filterTags:{type:Array,default:function(){return[]}}},data:function(){return{isModalOpen:!1,displayMode:"thumb",items:[],loading:!1}},created:function(){this.filter()},methods:{filter:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.loading=!0,h["a"].getItems(e).then((function(e){t.items=e})).catch(console.error).finally((function(){t.loading=!1}))},onItems:function(t){var e=t.data;t.meta;this.displayMode="text",this.$store.commit("updateItems",e)}}},y=g,b=Object(p["a"])(y,i,a,!1,null,"56f0cfd8",null);e["default"]=b.exports},"628c":function(t,e,n){},7088:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.adminPage||t.$store.getters.isLogged?n("div",{staticClass:"connect"},[n("Modal",{attrs:{"is-open":t.isModalConnectOpen},on:{close:function(e){t.isModalConnectOpen=!1}}},[n("Connect")],1),t.$store.getters.userNick?n("span",[t._v(t._s(t.$store.getters.userNick)+" ")]):t._e(),t.$store.getters.isLogged?n("button",{on:{click:t.logout}},[t._v("Signout")]):n("button",{on:{click:function(e){t.isModalConnectOpen=!0}}},[t._v("Signin")]),t.$store.getters.userImage?n("img",{staticClass:"avatar",attrs:{src:t.$store.getters.userImage.src,width:t.$store.getters.userImage.width,height:t.$store.getters.userImage.height,alt:"avatar"}}):t._e()],1):t._e()},a=[],s=n("06fa"),o=n("714b"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"connect"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mail,expression:"mail"}],attrs:{type:"text",placeholder:"login"},domProps:{value:t.mail},on:{input:function(e){e.target.composing||(t.mail=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),n("button",{on:{click:t.login}},[t._v("Signin")])])},l=[],c={components:{},data:function(){return{mail:"",pass:""}},methods:{login:function(){var t=this;s["b"].login(this.mail,this.pass).then((function(e){t.$emit("logged")}))}}},u=c,d=(n("bcac"),n("2877")),p=Object(d["a"])(u,r,l,!1,null,"4a3571ae",null),m=p.exports,f={components:{Modal:o["a"],Connect:m},props:{adminPage:{type:Boolean,default:!1}},data:function(){return{isModalConnectOpen:!1}},methods:{logout:function(){s["b"].logout()}}},h=f,v=(n("3a3a"),Object(d["a"])(h,i,a,!1,null,"7018b24b",null));e["default"]=v.exports},7587:function(t,e,n){},9337:function(t,e,n){"use strict";var i=n("c75b"),a=n.n(i);a.a},"970d":function(t,e,n){},bcac:function(t,e,n){"use strict";var i=n("e3c5"),a=n.n(i);a.a},c75b:function(t,e,n){},cda2:function(t,e,n){"use strict";var i=n("628c"),a=n.n(i);a.a},cdea:function(t,e,n){},e3c5:function(t,e,n){},f8f2:function(t,e,n){"use strict";var i=n("7587"),a=n.n(i);a.a},fbeb:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isFile,expression:"isFile"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isFile)?t._i(t.isFile,null)>-1:t.isFile},on:{change:function(e){var n=t.isFile,i=e.target,a=!!i.checked;if(Array.isArray(n)){var s=null,o=t._i(n,s);i.checked?o<0&&(t.isFile=n.concat([s])):o>-1&&(t.isFile=n.slice(0,o).concat(n.slice(o+1)))}else t.isFile=a}}}),t._v("File")]),0===t.state?n("div",[t.input.image||t.input.file?n("AdminFileLoader",{attrs:{image:t.input.image||t.input.file,colors:t.input.colors,"only-img":!1},on:{change:t.fileChange}}):[n("InputTextarea",{attrs:{value:t.input.input,placeholder:"Content (URL, markdown, HTML, embed...)"},on:{submit:t.validContent,change:function(e){return t.$set(t.input,"input",e)}}})],n("button",{on:{click:t.validContent}},[t._v("Ok")])],2):1===t.state?n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.date,expression:"input.date"}],staticClass:"date",attrs:{type:"datetime-local"},domProps:{value:t.input.date},on:{input:function(e){e.target.composing||t.$set(t.input,"date",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.input.title,expression:"input.title"}],staticClass:"title",attrs:{type:"text",placeholder:"title"},domProps:{value:t.input.title},on:{input:function(e){e.target.composing||t.$set(t.input,"title",e.target.value)}}}),n("InputTextarea",{attrs:{value:t.input.description,placeholder:"Description"},on:{change:function(e){return t.$set(t.input,"description",e)}}}),n("Tags",{attrs:{tags:t.input.tags?t.input.tags:[],placeholder:"Tags (separated by comas)"},on:{change:function(e){return t.input.tags=e}}}),n("span",[t._v("Types:")]),n("ul",{staticClass:"types"},t._l(t.input.types,(function(e){return n("li",{key:e,attrs:{type:"text"},domProps:{innerHTML:t._s(e)}})})),0),n("Tabs",{attrs:{labels:["Content","Thumb","Initial"]}},[n("template",{slot:"Content"},[t.input?n("Content",{attrs:{item:t.input}}):t._e()],1),n("template",{slot:"Thumb"},[n("AdminFileLoader",{attrs:{image:t.input.image,colors:t.input.colors,"only-img":!1},on:{change:t.fileChange}})],1),n("template",{slot:"Initial"},[n("InputTextarea",{attrs:{value:t.input.input,placeholder:"Content (URL, markdown, HTML, embed...)"},on:{submit:t.validContent,change:function(e){return t.input.input=e}}})],1)],2),n("select",{directives:[{name:"model",rawName:"v-model",value:t.input.status,expression:"input.status"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.input,"status",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"public"}},[t._v("Public")]),n("option",{attrs:{value:"protected"}},[t._v("Protected")]),n("option",{attrs:{value:"private"}},[t._v("Private")]),n("option",{attrs:{value:"draft"}},[t._v("Draft")]),n("option",{attrs:{value:"deleted"}},[t._v("Deleted")])]),n("button",{domProps:{innerHTML:t._s(t.create?"Create":"Update")},on:{click:t.save}}),t.create?t._e():n("button",{on:{click:t.deleteItem}},[t._v("Delete")]),n("button",{on:{click:t.cancel}},[t._v("Cancel changes")])],1):t._e()])},a=[],s=n("34e7"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.src?n("button",{on:{click:t.deleteFile}},[t._v("Delete image")]):n("input",{attrs:{type:"file",disabled:!1,accept:t.onlyImg?"image/*":"*"},on:{change:function(e){return t.filesChange(e.target.files)}}}),t.colors?n("div",{staticClass:"colors"},t._l(t.colors,(function(t){return n("span",{key:t,staticClass:"color",style:{background:t}})})),0):t._e(),t.isImg&&""!==t.src?n("img",{staticClass:"file-img",attrs:{src:t.src}}):t._e()])},r=[];function l(t,e){return d(t)||u(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done);i=!0)if(n.push(o.value),e&&n.length===e)break}catch(l){a=!0,s=l}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return n}}function d(t){if(Array.isArray(t))return t}var p={props:{image:{default:null},colors:{type:Array,default:function(){return[]}},onlyImg:{type:Boolean,default:!1}},data:function(){return{isImg:!0,src:""}},watch:{image:{immediate:!0,handler:function(t,e){e instanceof File&&this.src&&(URL.revokeObjectURL(this.src),this.src=""),t instanceof File?this.src=URL.createObjectURL(t):t&&t.src?this.src=t.src:t||(this.src="")}}},destroyed:function(){this.image instanceof File&&this.src&&(URL.revokeObjectURL(this.src),this.src="")},methods:{filesChange:function(t){var e=l(t,1),n=e[0];this.$emit("change",n)},deleteFile:function(){this.$emit("change",null)}}},m=p,f=(n("30c7"),n("2877")),h=Object(f["a"])(m,o,r,!1,null,"430e28b2",null),v=h.exports,g=n("3855"),y=n("9d26"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.modelValue,expression:"modelValue"}],ref:"contentRaw",attrs:{rows:"1",placeholder:t.placeholder},domProps:{value:t.modelValue},on:{keydown:t.resizeContentRaw,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.submit(e):null},input:function(e){e.target.composing||(t.modelValue=e.target.value)}}})},_=[],w={props:{placeholder:{type:String},value:{type:String}},data:function(){return{modelValue:null}},watch:{value:function(t){t!==this.modelValue&&(this.modelValue=t)},modelValue:function(t){t!==this.value&&(this.$emit("change",t),this.resizeContentRaw())}},created:function(){this.modelValue=this.value},mounted:function(){this.resizeContentRaw(),window.addEventListener("resize",this.resizeContentRaw)},destroyed:function(){window.removeEventListener("resize",this.resizeContentRaw)},methods:{resizeContentRaw:function(){var t=this.$refs.contentRaw;this.$nextTick((function(){t.style.cssText="height:auto; padding:0",t.style.cssText="height:"+t.scrollHeight+"px"}))},submit:function(){this.$emit("submit",this.modelValue)}}},C=w,k=(n("9337"),Object(f["a"])(C,b,_,!1,null,"5f44381c",null)),O=k.exports,x=n("e31e"),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},[n("ul",{staticClass:"list-item"},t._l(t.labels,(function(e,i){return n("li",{key:e,staticClass:"item",class:{"is-selected":i===t.current}},[n("button",{domProps:{innerHTML:t._s(e)},on:{click:function(e){t.current=i}}})])})),0),n("div",{staticClass:"content"},[t._t(t.labels[t.current])],2)])},$=[],I={props:{labels:{type:Array,default:function(){return[]}}},data:function(){return{current:0}},created:function(){},methods:{}},L=I,T=(n("f8f2"),Object(f["a"])(L,M,$,!1,null,"637b949b",null)),S=T.exports,F={components:{AdminFileLoader:v,Content:y["a"],InputTextarea:O,Tags:g["a"],Tabs:S},props:{item:{type:Object,default:function(){return{}}},create:{type:Boolean,default:!1}},data:function(){return{isFile:!1,input:null,state:0}},watch:{"input.date":function(t){this.itemSave.date=new Date(t)},"input.title":function(t){this.itemSave.title=t},"input.description":function(t){this.itemSave.description=t},"input.types":function(t){this.itemSave.types=t},"input.content":function(t){this.itemSave.content=t},"input.tags":function(t){this.itemSave.tags=t},"input.status":function(t){this.itemSave.status=t},"input.input":function(t){this.itemSave.input=t}},computed:{},created:function(){this.itemSave=new x["a"],this.create||(this.itemSave.fromObject(this.item),this.state=1),this.input=this.itemSave.getObject(),this.inputFile=null,window.addEventListener("keyup",this.keyUp)},destroyed:function(){window.removeEventListener("keyup",this.keyUp),this.itemSave.dispose()},methods:{validContent:function(){var t=this;this.itemSave.updateByInput(this.input.input).then((function(e){t.input=t.itemSave.getObject(),t.isFile=t.input.types.indexOf("image")>-1||t.input.types.indexOf("file")>-1,t.state++}))},deleteItem:function(){var t=this,e=new x["a"];e.fromObject(this.item),s["a"].deleteItem(e.getPayload()).then((function(){return t.$emit("cancel")})).catch((function(t){return console.error(t)})).finally((function(){return e.dispose()}))},save:function(){var t=this.itemSave.getPayload();if(console.log(this.itemSave),console.log(t),this.create)s["a"].addItem(t).catch((function(t){console.log(t)})),this.cancel();else{var e=new x["a"];e.fromObject(this.item),s["a"].updateItem(t,e.getPayload()),this.cancel()}},cancel:function(){this.$emit("cancel")},keyUp:function(t){27===t.keyCode&&this.close()},fileChange:function(t){var e=this;t?this.itemSave.updateByFile(t).then((function(t){e.input=t.getObject()})):this.itemSave.removeFile().then((function(t){e.input=t.getObject()}))}}},j=F,A=(n("1101"),Object(f["a"])(j,i,a,!1,null,"77ddfbc7",null));e["default"]=A.exports}}]);
//# sourceMappingURL=admin.8e24e9c9.js.map