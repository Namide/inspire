{"version":3,"sources":["webpack:///./src/interfaces/file-size/format-size.js","webpack:///./src/interfaces/file/input.vue?7bf4","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js","webpack:///./src/interfaces/file/input.vue?7eaa","webpack:///src/interfaces/file/input.vue","webpack:///./src/interfaces/file/input.vue?e7b9","webpack:///./src/interfaces/file/input.vue","webpack:///./src/interfaces/file/get-icon.js"],"names":["formatSize","bytes","decimal","threshold","Boolean","Math","abs","units","unitIndex","remainingBytes","length","toFixed","module","exports","props","id","type","String","required","name","value","default","Number","readonly","collection","options","Object","newItem","relation","fields","values","width","val","includes","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","Array","isArray","attrs","image","title","subtitle","subtitleExtra","src","icon","deselect","text","remove","startsWith","isImage","on","$event","$emit","removeFile","accept","saveUpload","_e","existing","done","onSearchInput","viewType","filters","viewQuery","viewOptions","setViewOptions","setViewQuery","saveSelection","staticRenderFns","mixins","data","viewOptionsOverride","viewTypeOverride","viewQueryOverride","filtersOverride","_","cloneDeep","computed","noFileAccess","url","fileTypeFilters","methods","response","q","file","component","getIcon"],"mappings":"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","file":"js/chunk-d3e1ea70.f67f0b5b.js","sourcesContent":["/**\n * Convert a value in bytes to a human readable format\n * @param {number} value The value in bytes to format\n * @return {string} The human readable filesize\n * @example\n *\n * const byteSize = 1500;\n * const fileSize = formatSize(byteSize);\n * // => '1.5 KB'\n * @see https://stackoverflow.com/a/14919494/4859211\n */\nexport default function formatSize(bytes = 0, decimal = true) {\n  const threshold = decimal ? 1000 : 1024;\n\n  if (Boolean(bytes) === false) {\n    return \"--\";\n  }\n\n  if (Math.abs(bytes) < threshold) {\n    return `${bytes} B`;\n  }\n\n  const units = decimal\n    ? [\"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n    : [\"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"];\n\n  let unitIndex = -1;\n  let remainingBytes = bytes;\n\n  do {\n    remainingBytes /= threshold;\n    unitIndex += 1;\n  } while (Math.abs(remainingBytes) >= threshold && unitIndex < units.length - 1);\n\n  return `${remainingBytes.toFixed(1)} ${units[unitIndex]}`;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=806c4d9c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=806c4d9c&lang=scss&scoped=true&\"","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // Name of the collection\n    collection: {\n      type: String,\n      default: null\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    },\n    width: {\n      type: String,\n      default: null,\n      validator(val) {\n        return [\n          'half',\n          'half-left',\n          'half-right',\n          'full',\n          'fill'\n        ].includes(val);\n      }\n    }\n  }\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-single-file\"},[(_vm.noFileAccess)?_c('v-notice',[_vm._v(\"\\n    \"+_vm._s(_vm.$t(\"this_item_is_not_available\"))+\"\\n  \")]):[(Array.isArray(_vm.value) === false && _vm.value)?_c('v-card',{staticClass:\"card\",attrs:{\"title\":_vm.image.title,\"subtitle\":_vm.subtitle + _vm.subtitleExtra,\"src\":_vm.src,\"icon\":_vm.icon,\"text-background\":\"\",\"color\":\"black\",\"options\":{\n        deselect: {\n          text: _vm.$t('deselect'),\n          icon: 'clear'\n        },\n        remove: {\n          text: _vm.$t('delete'),\n          icon: 'delete'\n        }\n      },\"medium-image\":_vm.width.startsWith('half'),\"big-image\":_vm.width === 'full',\"only-show-on-hover\":_vm.isImage},on:{\"deselect\":function($event){return _vm.$emit('input', null)},\"remove\":_vm.removeFile}}):_c('v-upload',{staticClass:\"uploader\",attrs:{\"small\":\"\",\"disabled\":_vm.readonly,\"accept\":_vm.options.accept,\"multiple\":false},on:{\"upload\":_vm.saveUpload}}),(!_vm.value)?_c('div',{staticClass:\"buttons\"},[_c('v-button',{attrs:{\"type\":\"button\",\"disabled\":_vm.readonly},on:{\"click\":function($event){_vm.existing = true}}},[_c('v-icon',{attrs:{\"name\":\"playlist_add\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"existing\"))+\"\\n      \")],1)],1):_vm._e(),(_vm.existing)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('choose_one'),\"buttons\":{\n          done: {\n            text: _vm.$t('done')\n          }\n        }},on:{\"cancel\":function($event){_vm.existing = false},\"close\":function($event){_vm.existing = false},\"done\":function($event){_vm.existing = false}}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"search\"},[_c('v-input',{staticClass:\"search-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.$t('search_for_item')},on:{\"input\":_vm.onSearchInput}})],1),_c('v-items',{staticClass:\"items\",attrs:{\"collection\":\"directus_files\",\"view-type\":_vm.viewType,\"selection\":_vm.value ? [_vm.value] : [],\"filters\":_vm.filters,\"view-query\":_vm.viewQuery,\"view-options\":_vm.viewOptions},on:{\"options\":_vm.setViewOptions,\"query\":_vm.setViewQuery,\"select\":_vm.saveSelection}})],1)])],1):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"input-single-file\">\n    <v-notice v-if=\"noFileAccess\">\n      {{ $t(\"this_item_is_not_available\") }}\n    </v-notice>\n\n    <template v-else>\n      <v-card\n        v-if=\"Array.isArray(value) === false && value\"\n        class=\"card\"\n        :title=\"image.title\"\n        :subtitle=\"subtitle + subtitleExtra\"\n        :src=\"src\"\n        :icon=\"icon\"\n        text-background\n        color=\"black\"\n        :options=\"{\n          deselect: {\n            text: $t('deselect'),\n            icon: 'clear'\n          },\n          remove: {\n            text: $t('delete'),\n            icon: 'delete'\n          }\n        }\"\n        :medium-image=\"width.startsWith('half')\"\n        :big-image=\"width === 'full'\"\n        :only-show-on-hover=\"isImage\"\n        @deselect=\"$emit('input', null)\"\n        @remove=\"removeFile\"\n      ></v-card>\n      <v-upload\n        v-else\n        small\n        :disabled=\"readonly\"\n        class=\"uploader\"\n        :accept=\"options.accept\"\n        :multiple=\"false\"\n        @upload=\"saveUpload\"\n      ></v-upload>\n\n      <div v-if=\"!value\" class=\"buttons\">\n        <v-button type=\"button\" :disabled=\"readonly\" @click=\"existing = true\">\n          <v-icon name=\"playlist_add\" />\n          {{ $t(\"existing\") }}\n        </v-button>\n      </div>\n\n      <portal v-if=\"existing\" to=\"modal\">\n        <v-modal\n          :title=\"$t('choose_one')\"\n          :buttons=\"{\n            done: {\n              text: $t('done')\n            }\n          }\"\n          @cancel=\"existing = false\"\n          @close=\"existing = false\"\n          @done=\"existing = false\"\n        >\n          <div class=\"content\">\n            <div class=\"search\">\n              <v-input\n                type=\"search\"\n                :placeholder=\"$t('search_for_item')\"\n                class=\"search-input\"\n                @input=\"onSearchInput\"\n              />\n            </div>\n            <v-items\n              class=\"items\"\n              collection=\"directus_files\"\n              :view-type=\"viewType\"\n              :selection=\"value ? [value] : []\"\n              :filters=\"filters\"\n              :view-query=\"viewQuery\"\n              :view-options=\"viewOptions\"\n              @options=\"setViewOptions\"\n              @query=\"setViewQuery\"\n              @select=\"saveSelection\"\n            ></v-items>\n          </div>\n        </v-modal>\n      </portal>\n    </template>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/interface\";\nimport formatSize from \"../file-size/format-size\";\nimport getIcon from \"./get-icon\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  mixins: [mixin],\n  data() {\n    return {\n      existing: false,\n      viewOptionsOverride: {},\n      viewTypeOverride: null,\n      viewQueryOverride: {},\n      filtersOverride: [],\n      image: _.cloneDeep(this.value)\n    };\n  },\n  computed: {\n    ...mapState([\"currentProjectKey\"]),\n    noFileAccess() {\n      return this.value && typeof this.value !== \"object\";\n    },\n    subtitle() {\n      if (!this.image) return \"\";\n\n      return (\n        this.image.filename_disk\n          .split(\".\")\n          .pop()\n          .toUpperCase() +\n        \" • \" +\n        this.$d(new Date(this.image.uploaded_on), \"short\")\n      );\n    },\n    subtitleExtra() {\n      // Image ? -> display dimensions and formatted filesize\n      return this.image.type && this.image.type.startsWith(\"image\")\n        ? \" • \" + formatSize(this.image.filesize)\n        : \"\";\n    },\n    src() {\n      if (!this.image.type || !this.image.type.startsWith(\"image\")) {\n        return null;\n      }\n\n      if (this.image.type === \"image/svg+xml\") {\n        return this.image.data.url;\n      }\n\n      const size = this.width === \"full\" ? \"large\" : \"medium\";\n      const fit = this.options.crop ? \"crop\" : \"contain\";\n\n      return `/${this.currentProjectKey}/assets/${this.image.private_hash}?key=directus-${size}-${fit}`;\n    },\n    isImage() {\n      return this.image.type && this.image.type.startsWith(\"image\");\n    },\n    icon() {\n      return this.image.type && !this.image.type.startsWith(\"image\")\n        ? getIcon(this.image.type)\n        : null;\n    },\n    viewOptions() {\n      const viewOptions = this.options.viewOptions;\n      return {\n        ...viewOptions,\n        ...this.viewOptionsOverride\n      };\n    },\n    viewType() {\n      if (this.viewTypeOverride) return this.viewTypeOverride;\n      return this.options.viewType;\n    },\n    viewQuery() {\n      const viewQuery = this.options.viewQuery;\n      return {\n        ...viewQuery,\n        ...this.viewQueryOverride\n      };\n    },\n    filters() {\n      return [...(this.options.filters || []), ...this.fileTypeFilters, ...this.filtersOverride];\n    },\n    fileTypeFilters() {\n      if (\n        !this.options.accept ||\n        this.filtersOverride.length > 0 ||\n        (this.options.filters || []).some(filter => filter.field === \"type\")\n      ) {\n        return [];\n      }\n\n      return [\n        {\n          field: \"type\",\n          operator: \"in\",\n          value: (this.options.accept || \"\").trim().split(/,\\s*/)\n        }\n      ];\n    }\n  },\n  async created() {\n    if (this.value && this.value.id) {\n      try {\n        let fileData = await this.$api.getItem(\"directus_files\", this.value.id);\n        this.image = fileData.data;\n      } catch (e) {}\n    }\n    this.onSearchInput = _.debounce(this.onSearchInput, 200);\n  },\n  methods: {\n    saveUpload(response) {\n      this.image = response.data.data;\n      // We know that the primary key of directus_files is called `id`\n      this.$emit(\"input\", { id: this.image.id });\n    },\n    setViewOptions(updates) {\n      this.viewOptionsOverride = {\n        ...this.viewOptionsOverride,\n        ...updates\n      };\n    },\n    setViewQuery(updates) {\n      this.viewQueryOverride = {\n        ...this.viewQueryOverride,\n        ...updates\n      };\n    },\n    onSearchInput(value) {\n      this.setViewQuery({\n        q: value\n      });\n    },\n    saveSelection(value) {\n      const file = value[value.length - 1];\n\n      if (file) {\n        this.image = file;\n        this.$emit(\"input\", { id: file.id });\n      } else {\n        this.image = null;\n        this.$emit(\"input\", null);\n      }\n    },\n    async removeFile() {\n      const file = this.value;\n      await this.$api.deleteItem(\"directus_files\", file.id);\n      this.$notify({\n        title: this.$t(\"item_deleted\"),\n        color: \"green\",\n        iconMain: \"check\"\n      });\n      this.image = null;\n      this.$emit(\"input\", null);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.card,\n.uploader {\n  width: 100%;\n  max-width: var(--width-x-large);\n}\n\n.uploader {\n  height: 236px;\n}\n\n.buttons {\n  margin-top: 24px;\n}\n\nbutton {\n  display: inline-block;\n  margin-left: 20px;\n  &:first-of-type {\n    margin-left: 0;\n  }\n}\n\n.body {\n  padding: 20px;\n}\n\n.search-input {\n  border-bottom: 2px solid var(--input-border-color);\n  &::v-deep input {\n    border-radius: 0;\n    border: none;\n    padding-left: var(--page-padding);\n    height: var(--header-height);\n\n    &::placeholder {\n      color: var(--input-placeholder-color);\n    }\n  }\n}\n\n.content {\n  &::v-deep .v-layout {\n    height: auto;\n    max-height: none;\n    overflow: hidden;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=806c4d9c&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=806c4d9c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"806c4d9c\",\n  null\n  \n)\n\nexport default component.exports","export default function getIcon(type) {\n  if (type === \"application/pdf\") {\n    return \"picture_as_pdf\";\n  }\n\n  if (type.startsWith(\"application\")) {\n    return \"insert_drive_file\";\n  }\n\n  if (type.startsWith(\"image\")) {\n    return \"crop_original\";\n  }\n\n  if (type.startsWith(\"video\")) {\n    return \"videocam\";\n  }\n\n  if (type.startsWith(\"code\")) {\n    return \"code\";\n  }\n\n  if (type.startsWith(\"audio\")) {\n    return \"audiotrack\";\n  }\n\n  return \"save\";\n}\n"],"sourceRoot":""}