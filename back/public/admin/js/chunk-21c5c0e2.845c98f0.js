(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21c5c0e2"],{"0e86":function(e,t,n){"use strict";var a=n("6708"),i=n.n(a);i.a},6708:function(e,t,n){},8485:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.relationshipSetup?n("v-sheet",[n("v-select",{staticClass:"language-picker",attrs:{options:e.options.languages,icon:"translate"},model:{value:e.currentLanguage,callback:function(t){e.currentLanguage=t},expression:"currentLanguage"}}),n("hr"),!1===e.loading&&null!==e.initialValues?n("div",{staticClass:"body"},[n("v-form",{key:e.currentLanguage,attrs:{"full-width":"",fields:e.translatedFields,values:e.currentLanguageValues},on:{"stage-value":e.saveLanguage}})],1):n("v-spinner")],1):n("v-notice",{attrs:{color:"warning",icon:"warning"}},[e._v("\n  "+e._s(e.$t("relationship_not_setup"))+"\n")])},i=[],l=(n("96cf"),n("3b8d")),r=n("75fc"),u=n("bd86"),s=(n("7514"),n("ac6a"),n("456d"),n("8db2")),o=n.n(s),c={mixins:[o.a],data:function(){return{currentLanguage:Object.keys(this.options.languages)[0],loading:!1,initialValues:null,relationalChanges:[]}},computed:{translatedFields:function(){var e=this;if(!1!==this.relationshipSetup)return _.mapValues(this.relation.collection_many.fields,(function(t){return t=_.clone(t),t.field===e.relation.field_many.field&&(t.readonly=!0),t}))},defaults:function(){return _.mapValues(_.clone(this.translatedFields),(function(e){return e.default_value}))},existing:function(){return _.find(this.initialValues,Object(u["a"])({},this.options.languageField,this.currentLanguage))},currentLanguageValues:function(){var e=_.find(this.relationalChanges,Object(u["a"])({},this.options.languageField,this.currentLanguage));return _.merge({},this.existing||this.defaults,e)},relationshipSetup:function(){var e;return!!(null===(e=this.relation)||void 0===e?void 0:e.collection_many)},currentPrimaryKey:function(){var e=_.find(this.fields,{primary_key:!0}),t=e.field;return this.values[t]}},watch:{relationalChanges:{deep:!0,handler:function(e){e&&this.$emit("input",e)}}},created:function(){this.fetchInitial()},methods:{saveLanguage:function(e){var t=this,n=e.field,a=e.value,i=_.find(this.relationalChanges,Object(u["a"])({},this.options.languageField,this.currentLanguage));if(i)this.relationalChanges=this.relationalChanges.map((function(e){return e[t.options.languageField]===t.currentLanguage?_.merge({},e,Object(u["a"])({},n,a)):e}));else{var l,s=(l={},Object(u["a"])(l,n,a),Object(u["a"])(l,this.options.languageField,this.currentLanguage),l);if(this.existing){var o=_.find(this.translatedFields,{primary_key:!0}).field,c=this.existing[o];s[o]=c}this.relationalChanges=[].concat(Object(r["a"])(this.relationalChanges),[s])}},fetchInitial:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==this.relationshipSetup){e.next=2;break}return e.abrupt("return");case 2:if(!this.newItem){e.next=5;break}return this.initialValues=[],e.abrupt("return");case 5:return this.loading=!0,t=this.relation.collection_many.collection,n=this.relation.field_many.field,e.next=10,this.$api.getItems(t,{filter:Object(u["a"])({},n,{eq:this.currentPrimaryKey})});case 10:a=e.sent,i=a.data,this.initialValues=i,this.loading=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=c,g=(n("0e86"),n("2877")),h=Object(g["a"])(d,a,i,!1,null,"5955c16c",null);t["default"]=h.exports},"8db2":function(e,t){e.exports={props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},collection:{type:String,default:null},required:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null},width:{type:String,default:null,validator(e){return["half","half-left","half-right","full","fill"].includes(e)}}}}}}]);
//# sourceMappingURL=chunk-21c5c0e2.845c98f0.js.map